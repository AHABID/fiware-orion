==31082== Memcheck, a memory error detector
==31082== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==31082== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==31082== Command: contextBroker -vvvvv -harakiri -port 9999 -pidpath /tmp/orion_9999.pid -db testharness -t 0-255
==31082== 
T@09:33:21  paConfigActions[727]: setting trace levels to '0-255'
T@09:33:21  paConfigActions[728]: Leaving function paConfigActions
E@09:33:21  exitFunc[559]: unlink(/tmp/orion_9999.pid): No such file or directory
T@09:33:21  semInit[61]: Initialized 'req' semaphore
T@09:33:21  semInit[62]: Initialized 'mongo' semaphore
T@09:33:21  mongoSemTake[90]: mongoConnect taking the 'mongo' semaphore for 'connecting to mongo'
T@09:33:21  mongoSemTake[92]: mongoConnect has the 'mongo' semaphore
==31082== 
==31082== HEAP SUMMARY:
==31082==     in use at exit: 17,690 bytes in 104 blocks
==31082==   total heap usage: 3,269 allocs, 3,165 frees, 313,863 bytes allocated
==31082== 
==31082== LEAK SUMMARY:
==31082==    definitely lost: 0 bytes in 0 blocks
==31082==    indirectly lost: 0 bytes in 0 blocks
==31082==      possibly lost: 0 bytes in 0 blocks
==31082==    still reachable: 17,690 bytes in 104 blocks
==31082==         suppressed: 0 bytes in 0 blocks
==31082== Rerun with --leak-check=full to see details of leaked memory
==31082== 
==31082== For counts of detected and suppressed errors, rerun with: -v
==31082== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 7)
T@09:33:21  mongoConnect[136]: mongo version server: 2.4.9 (mayor: 2, minor: 4, extra: 9)
T@09:33:21  mongoSemGive[118]: mongoConnect gives the 'mongo' semaphore for 'connecting to mongo'
F@09:33:21  ***[600]: Connected to mongo at localhost:testharness
T@09:33:22  ensureLocationIndex[336]: ensuring 2dsphere index on location.coords
T@09:33:22  recoverOntimeIntervalThreads[353]: query() in 'testharness.csubs' collection: '{ conditions.type: "ONTIMEINTERVAL" }'
T@09:33:22  mongoSemTake[90]: recoverOntimeIntervalThreads taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:33:22  mongoSemTake[92]: recoverOntimeIntervalThreads has the 'mongo' semaphore
T@09:33:22  mongoSemGive[118]: recoverOntimeIntervalThreads gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
==31087== Source and destination overlap in strncpy(0xa4d8a7, 0xa4d8a7, 63)
==31087==    at 0x4C29782: strncpy (mc_replace_strmem.c:463)
==31087==    by 0x659678: restInit(RestService*, IpVersion, char const*, unsigned short, char const*, char const*, void (*)(ConnectionInfo*), bool) (rest.cpp:600)
==31087==    by 0x5DF38D: main (contextBroker.cpp:737)
==31087== 
==31087== Source and destination overlap in strncpy(0xa4d8e2, 0xa4d8e2, 63)
==31087==    at 0x4C29782: strncpy (mc_replace_strmem.c:463)
==31087==    by 0x65969C: restInit(RestService*, IpVersion, char const*, unsigned short, char const*, char const*, void (*)(ConnectionInfo*), bool) (rest.cpp:603)
==31087==    by 0x5DF38D: main (contextBroker.cpp:737)
==31087== 
V@09:33:22  restStart[499]: Starting HTTP daemon on IPv4 0.0.0.0 port 9999
V@09:33:22  restStart[541]: Starting HTTP daemon on IPv6 :: port 9999
==31087== Thread 4:
==31087== Syscall param mmap(length) contains uninitialised byte(s)
==31087==    at 0x58B9AFA: mmap (syscall-template.S:82)
==31087==    by 0x4E398E7: MHD_pool_create (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35F47: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A52: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E399BC: MHD_pool_allocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E33C62: MHD_set_connection_value (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34033: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E3426D: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34783: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
T@09:33:29  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Content-Length: 153
T@09:33:29  restService[135]: Parsing payload for URL '/NGSI10/unsubscribeContext', method 'POST', service vector index: 20
T@09:33:29  payloadParse[53]: parsing data for service 'UnsubscribeContextRequest'. Method: 'POST'
T@09:33:29  payloadParse[54]: outFormat: XML
T@09:33:29  payloadParse[58]: Calling xmlTreat for service request 14, payloadWord 'unsubscribeContextRequest'
2@09:33:29  xmlRequestGet[155]: Found xmlRequest of type 14, method 'POST' - index 20 (/unsubscribeContextRequest)
T@09:33:29  nullTreat[272]: Not treating node 'unsubscribeContextRequest'
T@09:33:29  xmlTreat[251]: Calling check for XML parsed tree (unsubscribeContextRequest)
T@09:33:29  UnsubscribeContextResponse[40]: created
T@09:33:29  ~UnsubscribeContextResponse[63]: destroyed
T@09:33:29  payloadParse[69]: result: 'OK'
T@09:33:29  payloadParse[70]: outFormat: XML
T@09:33:29  restService[138]: payloadParse returns 'OK'
T@09:33:29  restService[153]: Treating service POST /NGSI10/unsubscribeContext
T@09:33:29  UnsubscribeContextResponse[40]: created
T@09:33:29  reqSemTake[75]: mongoUnsubscribeContext taking the 'req' semaphore for 'ngsi10 unsubscribe request'
T@09:33:29  reqSemTake[77]: mongoUnsubscribeContext has the 'req' semaphore
T@09:33:29  mongoUnsubscribeContext[45]: Unsubscribe Context
T@09:33:29  mongoUnsubscribeContext[58]: findOne() in 'testharness.csubs' collection _id '012345678901234567890123'}
T@09:33:29  mongoSemTake[90]: mongoUnsubscribeContext taking the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:29  mongoSemTake[92]: mongoUnsubscribeContext has the 'mongo' semaphore
T@09:33:29  mongoSemGive[118]: mongoUnsubscribeContext gives the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:29  reqSemGive[104]: mongoUnsubscribeContext gives the 'req' semaphore for 'ngsi10 unsubscribe request (no subscriptions found)'
T@09:33:29  ~UnsubscribeContextResponse[63]: destroyed
T@09:33:29  restReply[65]: Response 1: responding with 295 bytes, Status Code 200
T@09:33:29  restReply[66]: Response payload: '<unsubscribeContextResponse>
  <subscriptionId>012345678901234567890123</subscriptionId>
  <statusCode>
    <code>404</code>
    <reasonPhrase>No context element found</reasonPhrase>
    <details>subscriptionId: '012345678901234567890123'</details>
  </statusCode>
</unsubscribeContextResponse>
'
T@09:33:29  ~RegisterContextResponse[56]: destroyed
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E399BC: MHD_pool_allocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E335B6: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E335BD: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2A639: memcpy (mc_replace_strmem.c:121)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2A64E: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2A69B: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2A790: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4C2A7C8: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4C2A7ED: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x58CFC9C: __vsprintf_chk (vsprintf_chk.c:79)
==31087==    by 0x58CFC0E: __sprintf_chk (sprintf_chk.c:33)
==31087==    by 0x4E33622: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4C2953C: strcpy (mc_replace_strmem.c:429)
==31087==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C29569: strcpy (mc_replace_strmem.c:112)
==31087==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2956E: strcpy (mc_replace_strmem.c:121)
==31087==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2957F: strcpy (mc_replace_strmem.c:429)
==31087==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4E3363E: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Syscall param sendto(msg) contains uninitialised byte(s)
==31087==    at 0x58BE0AC: send (send.c:32)
==31087==    by 0x4E36D69: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35963: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35A87: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A40: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4E39A52: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Thread 3:
==31087== Syscall param munmap(length) contains uninitialised byte(s)
==31087==    at 0x58B9B27: munmap (syscall-template.S:82)
==31087==    by 0x4E3996B: MHD_pool_destroy (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37030: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E3881C: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
T@09:33:29  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:33:29  httpHeaderGet[94]: HTTP Header:   Content-Length: 976
T@09:33:29  restService[135]: Parsing payload for URL '/NGSI10/subscribeContext', method 'POST', service vector index: 16
T@09:33:29  payloadParse[53]: parsing data for service 'SubscribeContextRequest'. Method: 'POST'
T@09:33:29  payloadParse[54]: outFormat: XML
T@09:33:29  payloadParse[58]: Calling xmlTreat for service request 12, payloadWord 'subscribeContextRequest'
2@09:33:29  xmlRequestGet[155]: Found xmlRequest of type 12, method 'POST' - index 16 (/subscribeContextRequest)
T@09:33:29  nullTreat[272]: Not treating node 'subscribeContextRequest'
T@09:33:29  nullTreat[272]: Not treating node 'entityIdList'
T@09:33:29  entityId[53]: Got an entityId
T@09:33:29  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:33:29  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:33:29  entityIdId[77]: Got an entityId:id: 'ConferenceRoom'
T@09:33:29  entityId[53]: Got an entityId
T@09:33:29  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:33:29  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:33:29  entityIdId[77]: Got an entityId:id: 'OfficeRoom'
T@09:33:29  nullTreat[272]: Not treating node 'attributeList'
T@09:33:29  attribute[90]: Got an attribute
T@09:33:29  attribute[90]: Got an attribute
T@09:33:29  reference[351]: Got a reference: 'http://127.0.0.1:1028'
T@09:33:29  duration[364]: Got a duration: 'P5Y'
T@09:33:29  restriction[104]: Got a restriction
T@09:33:29  attributeExpression[118]: Got an attributeExpression: 'testRestriction'
T@09:33:29  nullTreat[272]: Not treating node 'scope'
T@09:33:29  operationScope[134]: Got an operationScope
T@09:33:29  scopeType[149]: Got a scopeType: 'scope1'
T@09:33:29  scopeValue[176]: Got a scopeValue: 'sval1' for scopeType 'scope1'
T@09:33:29  operationScope[134]: Got an operationScope
T@09:33:29  scopeType[149]: Got a scopeType: 'scope2'
T@09:33:29  scopeValue[176]: Got a scopeValue: 'sval2' for scopeType 'scope2'
T@09:33:29  nullTreat[272]: Not treating node 'notifyConditions'
T@09:33:29  notifyCondition[376]: Got a Notify Condition
T@09:33:29  notifyConditionType[404]: Got a Notify Condition Type: 'ONTIMEINTERVAL'
T@09:33:29  nullTreat[272]: Not treating node 'condValueList'
T@09:33:29  condValue[417]: Got a Cond Value: 'PT10S'
T@09:33:29  notifyConditionRestriction[390]: Got a Notify Condition restriction
T@09:33:29  throttling[430]: Got a throttling: 'P5Y'
T@09:33:29  xmlTreat[251]: Calling check for XML parsed tree (subscribeContextRequest)
T@09:33:29  check[45]: In Restriction::check
T@09:33:30  check[59]: Restriction::check returns OK (2)
T@09:33:30  ~SubscribeContextResponse[38]: destroyed
T@09:33:30  payloadParse[69]: result: 'OK'
T@09:33:30  payloadParse[70]: outFormat: XML
T@09:33:30  restService[138]: payloadParse returns 'OK'
T@09:33:30  restService[153]: Treating service POST /NGSI10/subscribeContext
T@09:33:30  reqSemTake[75]: mongoSubscribeContext taking the 'req' semaphore for 'ngsi10 subscribe request'
T@09:33:30  reqSemTake[77]: mongoSubscribeContext has the 'req' semaphore
T@09:33:30  mongoSubscribeContext[46]: Subscribe Context Request
T@09:33:30  mongoSubscribeContext[57]: Subscription expiration: 1557135210
T@09:33:30  createIntervalThread[173]: created thread: 129128192
T@09:33:30  mongoSubscribeContext[108]: insert() in 'testharness.csubs' collection: '{ _id: ObjectId('5369fdeae11c8f0906a7404e'), expiration: 1557135210, reference: "http://127.0.0.1:1028", throttling: 157680000, entities: [ { id: "ConferenceRoom", type: "Room", isPattern: "false" }, { id: "OfficeRoom", type: "Room", isPattern: "false" } ], attrs: [ "temperature", "lightstatus" ], conditions: [ { type: "ONTIMEINTERVAL", value: 10 } ], format: "XML" }'
T@09:33:30  mongoSemTake[90]: mongoSubscribeContext taking the 'mongo' semaphore for 'insert into SubscribeContextCollection'
T@09:33:30  mongoSemTake[92]: mongoSubscribeContext has the 'mongo' semaphore
T@09:33:30  startOnIntervalThread[114]: ONTIMEINTERVAL thread wakes up (5369fdeae11c8f0906a7404e)
T@09:33:30  reqSemTake[75]: mongoGetContextSubscriptionInfo taking the 'req' semaphore for 'get info on subscriptions'
T@09:33:30  mongoSemGive[118]: mongoSubscribeContext gives the 'mongo' semaphore for 'insert into SubscribeContextCollection'
T@09:33:30  reqSemGive[104]: mongoSubscribeContext gives the 'req' semaphore for 'ngsi10 subscribe request'
T@09:33:30  ~SubscribeContextResponse[38]: destroyed
T@09:33:30  restReply[65]: Response 2: responding with 224 bytes, Status Code 200
T@09:33:30  restReply[66]: Response payload: '<subscribeContextResponse>
  <subscribeResponse>
    <subscriptionId>5369fdeae11c8f0906a7404e</subscriptionId>
    <duration>P5Y</duration>
    <throttling>P5Y</throttling>
  </subscribeResponse>
</subscribeContextResponse>
'
T@09:33:30  ~RegisterContextResponse[56]: destroyed
==31087== Thread 4:
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C2A63F: memcpy (mc_replace_strmem.c:124)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4C2A6FB: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Use of uninitialised value of size 8
==31087==    at 0x4C2A763: memcpy (mc_replace_strmem.c:838)
==31087==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
==31087== Conditional jump or move depends on uninitialised value(s)
==31087==    at 0x4C29570: strcpy (mc_replace_strmem.c:124)
==31087==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==31087==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==31087==    by 0x58BD0EC: clone (clone.S:112)
==31087== 
T@09:33:30  reqSemTake[77]: mongoGetContextSubscriptionInfo has the 'req' semaphore
T@09:33:30  mongoGetContextSubscriptionInfo[46]: Get Subscription Info operation
T@09:33:30  mongoGetContextSubscriptionInfo[51]: findOne() in 'testharness.csubs' collection by _id '5369fdeae11c8f0906a7404e'
T@09:33:30  mongoSemTake[90]: mongoGetContextSubscriptionInfo taking the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:30  mongoSemTake[92]: mongoGetContextSubscriptionInfo has the 'mongo' semaphore
T@09:33:30  mongoSemGive[118]: mongoGetContextSubscriptionInfo gives the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:30  mongoGetContextSubscriptionInfo[71]: retrieved subscription: { _id: ObjectId('5369fdeae11c8f0906a7404e'), expiration: 1557135210, reference: "http://127.0.0.1:1028", throttling: 157680000, entities: [ { id: "ConferenceRoom", type: "Room", isPattern: "false" }, { id: "OfficeRoom", type: "Room", isPattern: "false" } ], attrs: [ "temperature", "lightstatus" ], conditions: [ { type: "ONTIMEINTERVAL", value: 10 } ], format: "XML" }
T@09:33:30  reqSemGive[104]: mongoGetContextSubscriptionInfo gives the 'req' semaphore for 'get info on subscriptions'
T@09:33:30  reqSemTake[75]: mongoGetContextElementResponses taking the 'req' semaphore for 'get context-element responses'
T@09:33:30  reqSemTake[77]: mongoGetContextElementResponses has the 'req' semaphore
T@09:33:30  mongoGetContextElementResponses[124]: Get Notify Context Request operation
T@09:33:30  processEntitityPatternFalse[486]: Entity query token (isPattern=false): {id: ConferenceRoom, type: Room}
T@09:33:30  processEntitityPatternFalse[486]: Entity query token (isPattern=false): {id: OfficeRoom, type: Room}
T@09:33:30  entitiesQuery[702]: Attribute query token: 'temperature'
T@09:33:30  entitiesQuery[702]: Attribute query token: 'lightstatus'
T@09:33:30  entitiesQuery[742]: query() in 'testharness.entities' collection: '{ $or: [ { _id: { $in: [ { id: "ConferenceRoom", type: "Room" }, { id: "OfficeRoom", type: "Room" } ] } } ], attrs.name: { $in: [ "temperature", "lightstatus" ] } }'
T@09:33:30  mongoSemTake[90]: entitiesQuery taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:33:30  mongoSemTake[92]: entitiesQuery has the 'mongo' semaphore
T@09:33:30  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Content-Length: 153
T@09:33:30  restService[135]: Parsing payload for URL '/NGSI10/unsubscribeContext', method 'POST', service vector index: 20
T@09:33:30  payloadParse[53]: parsing data for service 'UnsubscribeContextRequest'. Method: 'POST'
T@09:33:30  payloadParse[54]: outFormat: XML
T@09:33:30  payloadParse[58]: Calling xmlTreat for service request 14, payloadWord 'unsubscribeContextRequest'
2@09:33:30  xmlRequestGet[155]: Found xmlRequest of type 14, method 'POST' - index 20 (/unsubscribeContextRequest)
T@09:33:30  nullTreat[272]: Not treating node 'unsubscribeContextRequest'
T@09:33:30  xmlTreat[251]: Calling check for XML parsed tree (unsubscribeContextRequest)
T@09:33:30  UnsubscribeContextResponse[40]: created
T@09:33:30  ~UnsubscribeContextResponse[63]: destroyed
T@09:33:30  payloadParse[69]: result: 'OK'
T@09:33:30  payloadParse[70]: outFormat: XML
T@09:33:30  restService[138]: payloadParse returns 'OK'
T@09:33:30  restService[153]: Treating service POST /NGSI10/unsubscribeContext
T@09:33:30  UnsubscribeContextResponse[40]: created
T@09:33:30  reqSemTake[75]: mongoUnsubscribeContext taking the 'req' semaphore for 'ngsi10 unsubscribe request'
T@09:33:30  mongoSemGive[118]: entitiesQuery gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:33:30  reqSemGive[104]: mongoGetContextElementResponses gives the 'req' semaphore for 'get context-element responses'
T@09:33:30  doNotification[92]: notification not sent due to empty context elements response vector)
T@09:33:30  reqSemTake[77]: mongoUnsubscribeContext has the 'req' semaphore
T@09:33:30  mongoUnsubscribeContext[45]: Unsubscribe Context
T@09:33:30  mongoUnsubscribeContext[58]: findOne() in 'testharness.csubs' collection _id '5369fdeae11c8f0906a7404e'}
T@09:33:30  mongoSemTake[90]: mongoUnsubscribeContext taking the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:30  mongoSemTake[92]: mongoUnsubscribeContext has the 'mongo' semaphore
T@09:33:30  mongoSemGive[118]: mongoUnsubscribeContext gives the 'mongo' semaphore for 'findOne in SubscribeContextCollection'
T@09:33:30  mongoUnsubscribeContext[103]: remove() in 'testharness.csubs' collection _id '5369fdeae11c8f0906a7404e'}
T@09:33:30  mongoSemTake[90]: mongoUnsubscribeContext taking the 'mongo' semaphore for 'remove from SubscribeContextCollection'
T@09:33:30  mongoSemTake[92]: mongoUnsubscribeContext has the 'mongo' semaphore
T@09:33:30  mongoSemGive[118]: mongoUnsubscribeContext gives the 'mongo' semaphore for 'remove from SubscribeContextCollection'
E@09:33:30  destroyOntimeIntervalThreads[220]: error joining thread 129128192: 22
T@09:33:30  reqSemGive[104]: mongoUnsubscribeContext gives the 'req' semaphore for 'ngsi10 unsubscribe request'
T@09:33:30  ~UnsubscribeContextResponse[63]: destroyed
T@09:33:30  restReply[65]: Response 3: responding with 207 bytes, Status Code 200
T@09:33:30  restReply[66]: Response payload: '<unsubscribeContextResponse>
  <subscriptionId>5369fdeae11c8f0906a7404e</subscriptionId>
  <statusCode>
    <code>200</code>
    <reasonPhrase>OK</reasonPhrase>
  </statusCode>
</unsubscribeContextResponse>
'
T@09:33:30  ~RegisterContextResponse[56]: destroyed
T@09:33:30  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:33:30  httpHeaderGet[94]: HTTP Header:   Accept: */*
T@09:33:30  restService[153]: Treating service GET /exit/harakiri
E@09:33:30  orionExit[548]: Received a 'DIE' request


SubscriptionId: 012345678901234567890123
2 EntityIds:
  Entity Id 0:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  Entity Id 1:
    Id:         OfficeRoom
    Type:       Room
    isPattern:  false
  Attribute List
    temperature
    lightstatus
  Reference: http://127.0.0.1:1028
  Duration: P5Y
  AttributeExpression: testRestriction
2 Scopes:
  Scope 0:
    Type:     scope1
    Value:    sval1
  Scope 1:
    Type:     scope2
    Value:    sval2
1 NotifyConditions    Notify Condition 0:
    type: ONTIMEINTERVAL
    ConditionValue List
      PT10S
    RestrictionString: restriction
  Throttling: P5Y


SubscriptionId: 5369fdeae11c8f0906a7404e
==31087== 
==31087== HEAP SUMMARY:
==31087==     in use at exit: 23,247 bytes in 149 blocks
==31087==   total heap usage: 4,433 allocs, 4,284 frees, 5,996,691 bytes allocated
==31087== 
==31087== LEAK SUMMARY:
==31087==    definitely lost: 0 bytes in 0 blocks
==31087==    indirectly lost: 0 bytes in 0 blocks
==31087==      possibly lost: 1,394 bytes in 16 blocks
==31087==    still reachable: 21,853 bytes in 133 blocks
==31087==         suppressed: 0 bytes in 0 blocks
==31087== Rerun with --leak-check=full to see details of leaked memory
==31087== 
==31087== For counts of detected and suppressed errors, rerun with: -v
==31087== Use --track-origins=yes to see where uninitialised values come from
==31087== ERROR SUMMARY: 110 errors from 33 contexts (suppressed: 7 from 7)
