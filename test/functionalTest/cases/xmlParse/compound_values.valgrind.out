==27963== Memcheck, a memory error detector
==27963== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==27963== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==27963== Command: contextBroker -vvvvv -harakiri -port 9999 -pidpath /tmp/orion_9999.pid -db testharness -t 0-255
==27963== 
T@09:27:32  paConfigActions[727]: setting trace levels to '0-255'
T@09:27:32  paConfigActions[728]: Leaving function paConfigActions
E@09:27:32  exitFunc[559]: unlink(/tmp/orion_9999.pid): No such file or directory
T@09:27:32  semInit[61]: Initialized 'req' semaphore
T@09:27:32  semInit[62]: Initialized 'mongo' semaphore
T@09:27:32  mongoSemTake[90]: mongoConnect taking the 'mongo' semaphore for 'connecting to mongo'
T@09:27:32  mongoSemTake[92]: mongoConnect has the 'mongo' semaphore
==27963== 
==27963== HEAP SUMMARY:
==27963==     in use at exit: 17,690 bytes in 104 blocks
==27963==   total heap usage: 3,269 allocs, 3,165 frees, 313,863 bytes allocated
==27963== 
==27963== LEAK SUMMARY:
==27963==    definitely lost: 0 bytes in 0 blocks
==27963==    indirectly lost: 0 bytes in 0 blocks
==27963==      possibly lost: 0 bytes in 0 blocks
==27963==    still reachable: 17,690 bytes in 104 blocks
==27963==         suppressed: 0 bytes in 0 blocks
==27963== Rerun with --leak-check=full to see details of leaked memory
==27963== 
==27963== For counts of detected and suppressed errors, rerun with: -v
==27963== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 7)
T@09:27:32  mongoConnect[136]: mongo version server: 2.4.9 (mayor: 2, minor: 4, extra: 9)
T@09:27:32  mongoSemGive[118]: mongoConnect gives the 'mongo' semaphore for 'connecting to mongo'
F@09:27:32  ***[600]: Connected to mongo at localhost:testharness
T@09:27:32  ensureLocationIndex[336]: ensuring 2dsphere index on location.coords
T@09:27:32  recoverOntimeIntervalThreads[353]: query() in 'testharness.csubs' collection: '{ conditions.type: "ONTIMEINTERVAL" }'
T@09:27:32  mongoSemTake[90]: recoverOntimeIntervalThreads taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:32  mongoSemTake[92]: recoverOntimeIntervalThreads has the 'mongo' semaphore
T@09:27:32  mongoSemGive[118]: recoverOntimeIntervalThreads gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
==27968== Source and destination overlap in strncpy(0xa4d8a7, 0xa4d8a7, 63)
==27968==    at 0x4C29782: strncpy (mc_replace_strmem.c:463)
==27968==    by 0x659678: restInit(RestService*, IpVersion, char const*, unsigned short, char const*, char const*, void (*)(ConnectionInfo*), bool) (rest.cpp:600)
==27968==    by 0x5DF38D: main (contextBroker.cpp:737)
==27968== 
==27968== Source and destination overlap in strncpy(0xa4d8e2, 0xa4d8e2, 63)
==27968==    at 0x4C29782: strncpy (mc_replace_strmem.c:463)
==27968==    by 0x65969C: restInit(RestService*, IpVersion, char const*, unsigned short, char const*, char const*, void (*)(ConnectionInfo*), bool) (rest.cpp:603)
==27968==    by 0x5DF38D: main (contextBroker.cpp:737)
==27968== 
V@09:27:32  restStart[499]: Starting HTTP daemon on IPv4 0.0.0.0 port 9999
V@09:27:32  restStart[541]: Starting HTTP daemon on IPv6 :: port 9999
==27968== Thread 4:
==27968== Syscall param mmap(length) contains uninitialised byte(s)
==27968==    at 0x58B9AFA: mmap (syscall-template.S:82)
==27968==    by 0x4E398E7: MHD_pool_create (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35F47: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A52: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35F20: MHD_connection_get_pollfd (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35FFB: MHD_connection_get_fdset (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E373B0: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E399BC: MHD_pool_allocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E33C62: MHD_set_connection_value (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34033: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E3426D: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34783: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
T@09:27:40  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Length: 421
T@09:27:40  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:40  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:40  payloadParse[54]: outFormat: XML
T@09:27:40  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:40  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:40  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:40  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:40  entityId[67]: Got an entityId
T@09:27:40  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:40  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:40  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:40  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:40  contextAttribute[103]: Creating an attribute
T@09:27:40  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:40  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:40  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:40  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x70950f0
T@09:27:40  contextAttributeValue[149]: Got an attribute value: '1'
T@09:27:40  updateAction[272]: Got an update action: 'APPEND'
T@09:27:40  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:40  ~UpdateContextResponse[58]: destroyed
T@09:27:40  payloadParse[69]: result: 'OK'
T@09:27:40  payloadParse[70]: outFormat: XML
T@09:27:40  restService[138]: payloadParse returns 'OK'
T@09:27:40  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:40  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:40  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:40  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:40  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:40  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:40  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:40  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:40  createEntity[1209]: Entity not found in 'testharness.entities' collection, creating it
T@09:27:40  createEntity[1241]: new attribute: {name: temperature, type: degree, value: 1}
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x63FD37: contextAttributeCustomMetadataToBson(mongo::BSONObj&, ContextAttribute*) (MongoCommonUpdate.cpp:536)
==27968==    by 0x649675: createEntity(EntityId, ContextAttributeVector, std::string*) (MongoCommonUpdate.cpp:1254)
==27968==    by 0x64D4B3: processContextElement(ContextElement*, UpdateContextResponse*, std::string) (MongoCommonUpdate.cpp:1594)
==27968==    by 0x633A5B: mongoUpdateContext(UpdateContextRequest*, UpdateContextResponse*) (mongoUpdateContext.cpp:51)
==27968==    by 0x615FBC: postUpdateContext(ConnectionInfo*, int, std::vector<std::string, std::allocator<std::string> >, ParseData*) (postUpdateContext.cpp:44)
==27968==    by 0x65D126: restService(ConnectionInfo*, RestService*) (RestService.cpp:155)
==27968==    by 0x6577FC: serve(ConnectionInfo*) (rest.cpp:234)
==27968==    by 0x658AA1: connectionTreat(void*, MHD_Connection*, char const*, char const*, char const*, char const*, unsigned long*, void**) (rest.cpp:458)
==27968==    by 0x4E34328: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DBF: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968== 
T@09:27:40  createEntity[1276]: insert() in 'testharness.entities' collection: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, modDate: 1399454860, value: "1" } ], creDate: 1399454860, modDate: 1399454860 }'
T@09:27:40  mongoSemTake[90]: createEntity taking the 'mongo' semaphore for 'insert into EntitiesCollection'
T@09:27:40  mongoSemTake[92]: createEntity has the 'mongo' semaphore
T@09:27:40  mongoSemGive[118]: createEntity gives the 'mongo' semaphore for 'insert into EntitiesCollection'
T@09:27:40  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:40  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454860 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454860 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:40  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:40  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:40  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:40  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:40  ~UpdateContextResponse[58]: destroyed
T@09:27:40  restReply[65]: Response 1: responding with 644 bytes, Status Code 200
T@09:27:40  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:40  ~RegisterContextResponse[56]: destroyed
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E399BC: MHD_pool_allocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E335B6: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E335BD: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2A639: memcpy (mc_replace_strmem.c:121)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2A64E: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2A69B: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2A790: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4C2A7C8: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4C2A7ED: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x58CFC9C: __vsprintf_chk (vsprintf_chk.c:79)
==27968==    by 0x58CFC0E: __sprintf_chk (sprintf_chk.c:33)
==27968==    by 0x4E33622: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4C2953C: strcpy (mc_replace_strmem.c:429)
==27968==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C29569: strcpy (mc_replace_strmem.c:112)
==27968==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2956E: strcpy (mc_replace_strmem.c:121)
==27968==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2957F: strcpy (mc_replace_strmem.c:429)
==27968==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4E3363E: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Syscall param sendto(msg) contains uninitialised byte(s)
==27968==    at 0x58BE0AC: send (send.c:32)
==27968==    by 0x4E36D69: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35963: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35A87: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A40: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E33BA1: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35A9D: MHD_connection_handle_write (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37638: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A1F: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A24: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4E39A52: MHD_pool_reallocate (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E334BF: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E35D17: MHD_connection_handle_read (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37648: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Thread 3:
==27968== Syscall param munmap(length) contains uninitialised byte(s)
==27968==    at 0x58B9B27: munmap (syscall-template.S:82)
==27968==    by 0x4E3996B: MHD_pool_destroy (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37030: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E3881C: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
T@09:27:40  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Length: 454
T@09:27:40  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:40  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:40  payloadParse[54]: outFormat: XML
T@09:27:40  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:40  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:40  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:40  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:40  entityId[67]: Got an entityId
T@09:27:40  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:40  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:40  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:40  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:40  contextAttribute[103]: Creating an attribute
T@09:27:40  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:40  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:40  contextAttributeType[130]: Got an attribute type: ' '
W@09:27:40  xmlParse[242]: ERROR: 'Unknown XML field: 'here'', PATH: '/updateContextRequest/contextElementList/contextElement/contextAttributeList/contextAttribute/type'   
T@09:27:40  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x72529a0
T@09:27:40  contextAttributeValue[149]: Got an attribute value: '1'
T@09:27:40  updateAction[272]: Got an update action: 'APPEND'
T@09:27:40  ~UpdateContextResponse[58]: destroyed
T@09:27:40  payloadParse[69]: result: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>Unknown XML field: 'here'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:40  payloadParse[70]: outFormat: XML
T@09:27:40  restReply[65]: Response 2: responding with 193 bytes, Status Code 200
T@09:27:40  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>Unknown XML field: 'here'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:40  restService[138]: payloadParse returns '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>Unknown XML field: 'here'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:40  restReply[65]: Response 3: responding with 193 bytes, Status Code 200
T@09:27:40  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>Unknown XML field: 'here'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:40  ~RegisterContextResponse[56]: destroyed
==27968== Thread 4:
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C2A63F: memcpy (mc_replace_strmem.c:124)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4C2A6FB: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Use of uninitialised value of size 8
==27968==    at 0x4C2A763: memcpy (mc_replace_strmem.c:838)
==27968==    by 0x4E338FA: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
==27968== Conditional jump or move depends on uninitialised value(s)
==27968==    at 0x4C29570: strcpy (mc_replace_strmem.c:124)
==27968==    by 0x4E33913: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E34DE0: MHD_connection_handle_idle (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x4E37420: ??? (in /usr/lib/x86_64-linux-gnu/libmicrohttpd.so.10.15.0)
==27968==    by 0x5B72B4F: start_thread (pthread_create.c:304)
==27968==    by 0x58BD0EC: clone (clone.S:112)
==27968== 
T@09:27:40  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:40  httpHeaderGet[94]: HTTP Header:   Content-Length: 437
T@09:27:40  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:40  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:40  payloadParse[54]: outFormat: XML
T@09:27:40  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:40  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:40  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:40  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:40  entityId[67]: Got an entityId
T@09:27:40  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:40  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:40  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:40  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:40  contextAttribute[103]: Creating an attribute
T@09:27:40  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:40  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:40  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:40  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x730d180
T@09:27:40  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:40  CompoundValueNode[75]: Created TOPLEVEL compound node (a Object)
T@09:27:40  CompoundValueNode[95]: Created compound node 's1' at level 1, sibling number 0, type String
T@09:27:40  add[167]: Adding String 's1', with value 'STRING' under '/' (toplevel)
T@09:27:40  compoundValueEnd[119]: Compound END
T@09:27:40  finish[143]: Finishing a compound
F@09:27:40  ***[228]: name:      toplevel
F@09:27:40  ***[233]: container: toplevel
F@09:27:40  ***[234]: level:     0
F@09:27:40  ***[235]: sibling:   0
F@09:27:40  ***[236]: type:      Object
F@09:27:40  ***[237]: path:      /
F@09:27:40  ***[238]: rootP:     toplevel
F@09:27:40  ***[251]: 1 children (s1)
F@09:27:40  ***[228]:   name:      s1
F@09:27:40  ***[231]:   value:     STRING
F@09:27:40  ***[233]:   container: toplevel
F@09:27:40  ***[234]:   level:     1
F@09:27:40  ***[235]:   sibling:   0
F@09:27:40  ***[236]:   type:      String
F@09:27:40  ***[237]:   path:      /s1
F@09:27:40  ***[238]:   rootP:     toplevel
F@09:27:40  ***[257]: 
F@09:27:40  ***[257]: 
T@09:27:40  compoundValueEnd[137]: Set compoundValueP (0x730dd00) for attribute at 0x730d180
T@09:27:40  compoundValueEnd[143]: Set current container to NULL
T@09:27:40  updateAction[272]: Got an update action: 'APPEND'
T@09:27:40  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:40  ~UpdateContextResponse[58]: destroyed
F@09:27:40  ***[228]:     name:      toplevel
F@09:27:40  ***[233]:     container: toplevel
F@09:27:40  ***[234]:     level:     0
F@09:27:40  ***[235]:     sibling:   0
F@09:27:40  ***[236]:     type:      Object
F@09:27:40  ***[237]:     path:      /
F@09:27:40  ***[238]:     rootP:     toplevel
F@09:27:40  ***[251]:     1 children (s1)
F@09:27:40  ***[228]:       name:      s1
F@09:27:40  ***[231]:       value:     STRING
F@09:27:40  ***[233]:       container: toplevel
F@09:27:40  ***[234]:       level:     1
F@09:27:40  ***[235]:       sibling:   0
F@09:27:40  ***[236]:       type:      String
F@09:27:40  ***[237]:       path:      /s1
F@09:27:40  ***[238]:       rootP:     toplevel
F@09:27:40  ***[257]: 
F@09:27:40  ***[257]: 
T@09:27:40  payloadParse[69]: result: 'OK'
T@09:27:40  payloadParse[70]: outFormat: XML
T@09:27:40  restService[138]: payloadParse returns 'OK'
T@09:27:40  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:40  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:40  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:40  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:40  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:40  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:40  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:40  processContextElement[1433]: retrieved document: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, modDate: 1399454860, value: "1" } ], creDate: 1399454860, modDate: 1399454860 }'
T@09:27:40  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:41  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:41  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:41  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  processContextElement[1518]: update() in 'testharness.entities' collection: {{ _id.id: "ConferenceRoom", _id.type: "Room" }, { $set: { attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: { s1: "STRING" }, modDate: 1399454860 } ], modDate: 1399454861 }, $unset: { location: 1 } }}
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1', path '/s1'
T@09:27:41  restReply[65]: Response 4: responding with 644 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 453
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x100a1880
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Object)
T@09:27:41  CompoundValueNode[95]: Created compound node 's1' at level 1, sibling number 0, type String
T@09:27:41  add[167]: Adding String 's1', with value 'STRING' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 's2' at level 1, sibling number 1, type String
T@09:27:41  add[167]: Adding String 's2', with value 'STRING' under '/' (toplevel)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Object
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 2 children (s1, s2)
F@09:27:41  ***[228]:   name:      s1
F@09:27:41  ***[231]:   value:     STRING
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /s1
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      s2
F@09:27:41  ***[231]:   value:     STRING
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   1
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /s2
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x100ca680) for attribute at 0x100a1880
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:41  ~UpdateContextResponse[58]: destroyed
F@09:27:41  ***[228]:     name:      toplevel
F@09:27:41  ***[233]:     container: toplevel
F@09:27:41  ***[234]:     level:     0
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      Object
F@09:27:41  ***[237]:     path:      /
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[251]:     2 children (s1, s2)
F@09:27:41  ***[228]:       name:      s1
F@09:27:41  ***[231]:       value:     STRING
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   0
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /s1
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      s2
F@09:27:41  ***[231]:       value:     STRING
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   1
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /s2
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  payloadParse[69]: result: 'OK'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restService[138]: payloadParse returns 'OK'
T@09:27:41  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:41  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:41  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  processContextElement[1433]: retrieved document: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: { s1: "STRING" }, modDate: 1399454860 } ], creDate: 1399454860, modDate: 1399454861 }'
T@09:27:41  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:41  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:41  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:41  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  processContextElement[1518]: update() in 'testharness.entities' collection: {{ _id.id: "ConferenceRoom", _id.type: "Room" }, { $set: { attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: { s1: "STRING", s2: "STRING" }, modDate: 1399454861 } ], modDate: 1399454861 }, $unset: { location: 1 } }}
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1', path '/s1'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's2', path '/s2'
T@09:27:41  restReply[65]: Response 5: responding with 644 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 469
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x1046a950
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Object)
T@09:27:41  CompoundValueNode[95]: Created compound node 's1' at level 1, sibling number 0, type String
T@09:27:41  add[167]: Adding String 's1', with value 'STRING' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 's2' at level 1, sibling number 1, type String
T@09:27:41  add[167]: Adding String 's2', with value 'STRING' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 's1' at level 1, sibling number 2, type String
T@09:27:41  add[167]: Adding String 's1', with value 'STRING' under '/' (toplevel)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Object
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 3 children (s1, s2, s1)
F@09:27:41  ***[228]:   name:      s1
F@09:27:41  ***[231]:   value:     STRING
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /s1
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      s2
F@09:27:41  ***[231]:   value:     STRING
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   1
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /s2
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      s1
F@09:27:41  ***[231]:   value:     STRING
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   2
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /s1
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
E@09:27:41  check[300]: duplicated tag-name: 's1' in '/'
W@09:27:41  compoundValueEnd[130]: ERROR: 'compound value error: duplicated tag-name: 's1' in '/''
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x10493750) for attribute at 0x1046a950
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  payloadParse[69]: result: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: duplicated tag-name: 's1' in '/'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restReply[65]: Response 6: responding with 222 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: duplicated tag-name: 's1' in '/'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  restService[138]: payloadParse returns '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: duplicated tag-name: 's1' in '/'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  restReply[65]: Response 7: responding with 222 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: duplicated tag-name: 's1' in '/'</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1', path '/s1'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's2', path '/s2'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1', path '/s1'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 456
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: 'vector') to: 0x10723ee0
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Vector)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 0, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '1' under '/' (toplevel)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Vector
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 1 children (vecitem)
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     1
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x1074ce60) for attribute at 0x10723ee0
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:41  ~UpdateContextResponse[58]: destroyed
F@09:27:41  ***[228]:     name:      toplevel
F@09:27:41  ***[233]:     container: toplevel
F@09:27:41  ***[234]:     level:     0
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      Vector
F@09:27:41  ***[237]:     path:      /
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[251]:     1 children (vecitem)
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     1
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   0
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  payloadParse[69]: result: 'OK'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restService[138]: payloadParse returns 'OK'
T@09:27:41  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:41  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:41  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  processContextElement[1433]: retrieved document: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: { s1: "STRING", s2: "STRING" }, modDate: 1399454861 } ], creDate: 1399454860, modDate: 1399454861 }'
T@09:27:41  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:41  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:41  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:41  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  processContextElement[1518]: update() in 'testharness.entities' collection: {{ _id.id: "ConferenceRoom", _id.type: "Room" }, { $set: { attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: [ "1" ], modDate: 1399454861 } ], modDate: 1399454861 }, $unset: { location: 1 } }}
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  restReply[65]: Response 8: responding with 644 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 540
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: 'vector') to: 0x10a44210
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Vector)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 0, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '1' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 1, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '2' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 2, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '3' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 3, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '4' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 4, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '5' under '/' (toplevel)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Vector
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 5 children (vecitem, vecitem, vecitem, vecitem, vecitem)
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     1
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     2
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   1
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     3
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   2
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     4
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   3
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     5
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   4
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x10a6d190) for attribute at 0x10a44210
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:41  ~UpdateContextResponse[58]: destroyed
F@09:27:41  ***[228]:     name:      toplevel
F@09:27:41  ***[233]:     container: toplevel
F@09:27:41  ***[234]:     level:     0
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      Vector
F@09:27:41  ***[237]:     path:      /
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[251]:     5 children (vecitem, vecitem, vecitem, vecitem, vecitem)
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     1
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   0
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     2
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   1
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     3
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   2
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     4
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   3
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      vecitem
F@09:27:41  ***[231]:       value:     5
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   4
F@09:27:41  ***[236]:       type:      String
F@09:27:41  ***[237]:       path:      /vecitem
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  payloadParse[69]: result: 'OK'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restService[138]: payloadParse returns 'OK'
T@09:27:41  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:41  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:41  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  processContextElement[1433]: retrieved document: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: [ "1" ], modDate: 1399454861 } ], creDate: 1399454860, modDate: 1399454861 }'
T@09:27:41  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:41  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:41  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:41  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  processContextElement[1518]: update() in 'testharness.entities' collection: {{ _id.id: "ConferenceRoom", _id.type: "Room" }, { $set: { attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: [ "1", "2", "3", "4", "5" ], modDate: 1399454861 } ], modDate: 1399454861 }, $unset: { location: 1 } }}
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  restReply[65]: Response 9: responding with 644 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 563
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: 'vector') to: 0x728bff0
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Vector)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 0, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '1' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 1, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '2' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 2, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '3' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 3, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '4' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem' at level 1, sibling number 4, type String
T@09:27:41  add[167]: Adding String 'vecitem', with value '5' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 'vecitem6' at level 1, sibling number 5, type String
T@09:27:41  add[167]: Adding String 'vecitem6', with value '6' under '/' (toplevel)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Vector
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 6 children (vecitem, vecitem, vecitem, vecitem, vecitem, vecitem6)
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     1
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     2
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   1
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     3
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   2
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     4
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   3
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem
F@09:27:41  ***[231]:   value:     5
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   4
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      vecitem6
F@09:27:41  ***[231]:   value:     6
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   5
F@09:27:41  ***[236]:   type:      String
F@09:27:41  ***[237]:   path:      /vecitem6
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
E@09:27:41  check[283]: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')
W@09:27:41  compoundValueEnd[130]: ERROR: 'compound value error: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')'
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x71b7720) for attribute at 0x728bff0
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  payloadParse[69]: result: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restReply[65]: Response 10: responding with 251 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  restService[138]: payloadParse returns '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  restReply[65]: Response 11: responding with 251 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <errorCode>
    <code>400</code>
    <reasonPhrase>Bad Request</reasonPhrase>
    <details>compound value error: bad tag-name of vector item: 'vecitem6' (should be 'vecitem')</details>
  </errorCode>
</updateContextResponse>
'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem', path '/vecitem'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'vecitem6', path '/vecitem6'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Type: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: application/xml
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Content-Length: 531
T@09:27:41  restService[135]: Parsing payload for URL '/ngsi10/updateContext', method 'POST', service vector index: 12
T@09:27:41  payloadParse[53]: parsing data for service 'UpdateContextRequest'. Method: 'POST'
T@09:27:41  payloadParse[54]: outFormat: XML
T@09:27:41  payloadParse[58]: Calling xmlTreat for service request 17, payloadWord 'updateContextRequest'
2@09:27:41  xmlRequestGet[155]: Found xmlRequest of type 17, method 'POST' - index 12 (/updateContextRequest)
T@09:27:41  nullTreat[272]: Not treating node 'updateContextRequest'
T@09:27:41  nullTreat[272]: Not treating node 'contextElementList'
T@09:27:41  entityId[67]: Got an entityId
T@09:27:41  entityIdParse[291]: Got a type for an entity: 'Room'
T@09:27:41  entityIdParse[296]: Got an isPattern for an entity: 'false'
T@09:27:41  entityIdId[88]: Got an entityId:id: 'ConferenceRoom'
T@09:27:41  nullTreat[272]: Not treating node 'contextAttributeList'
T@09:27:41  contextAttribute[103]: Creating an attribute
T@09:27:41  ContextAttribute[42]: Creating a ContextAttribute 1
T@09:27:41  contextAttributeName[117]: Got an attribute name: 'temperature'
T@09:27:41  contextAttributeType[130]: Got an attribute type: 'degree'
T@09:27:41  contextAttributeValue[147]: Set parseDataP->lastContextAttribute (type: '') to: 0x10088f70
T@09:27:41  contextAttributeValue[149]: Got an attribute value: ' '
T@09:27:41  CompoundValueNode[75]: Created TOPLEVEL compound node (a Object)
T@09:27:41  CompoundValueNode[95]: Created compound node 'struct1' at level 1, sibling number 0, type Object
T@09:27:41  add[169]: Adding Object 'struct1' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 's1-1' at level 2, sibling number 0, type String
T@09:27:41  add[167]: Adding String 's1-1', with value '1-1' under '/struct1' (struct1)
T@09:27:41  CompoundValueNode[95]: Created compound node 's1-2' at level 2, sibling number 1, type String
T@09:27:41  add[167]: Adding String 's1-2', with value '1-2' under '/struct1' (struct1)
T@09:27:41  CompoundValueNode[95]: Created compound node 'struct2' at level 1, sibling number 1, type Object
T@09:27:41  add[169]: Adding Object 'struct2' under '/' (toplevel)
T@09:27:41  CompoundValueNode[95]: Created compound node 's2-1' at level 2, sibling number 0, type String
T@09:27:41  add[167]: Adding String 's2-1', with value '2-1' under '/struct2' (struct2)
T@09:27:41  CompoundValueNode[95]: Created compound node 's2-2' at level 2, sibling number 1, type String
T@09:27:41  add[167]: Adding String 's2-2', with value '2-2' under '/struct2' (struct2)
T@09:27:41  compoundValueEnd[119]: Compound END
T@09:27:41  finish[143]: Finishing a compound
F@09:27:41  ***[228]: name:      toplevel
F@09:27:41  ***[233]: container: toplevel
F@09:27:41  ***[234]: level:     0
F@09:27:41  ***[235]: sibling:   0
F@09:27:41  ***[236]: type:      Object
F@09:27:41  ***[237]: path:      /
F@09:27:41  ***[238]: rootP:     toplevel
F@09:27:41  ***[251]: 2 children (struct1, struct2)
F@09:27:41  ***[228]:   name:      struct1
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   0
F@09:27:41  ***[236]:   type:      Object
F@09:27:41  ***[237]:   path:      /struct1
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[251]:   2 children (s1-1, s1-2)
F@09:27:41  ***[228]:     name:      s1-1
F@09:27:41  ***[231]:     value:     1-1
F@09:27:41  ***[233]:     container: struct1
F@09:27:41  ***[234]:     level:     2
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      String
F@09:27:41  ***[237]:     path:      /struct1/s1-1
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:     name:      s1-2
F@09:27:41  ***[231]:     value:     1-2
F@09:27:41  ***[233]:     container: struct1
F@09:27:41  ***[234]:     level:     2
F@09:27:41  ***[235]:     sibling:   1
F@09:27:41  ***[236]:     type:      String
F@09:27:41  ***[237]:     path:      /struct1/s1-2
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:   name:      struct2
F@09:27:41  ***[233]:   container: toplevel
F@09:27:41  ***[234]:   level:     1
F@09:27:41  ***[235]:   sibling:   1
F@09:27:41  ***[236]:   type:      Object
F@09:27:41  ***[237]:   path:      /struct2
F@09:27:41  ***[238]:   rootP:     toplevel
F@09:27:41  ***[251]:   2 children (s2-1, s2-2)
F@09:27:41  ***[228]:     name:      s2-1
F@09:27:41  ***[231]:     value:     2-1
F@09:27:41  ***[233]:     container: struct2
F@09:27:41  ***[234]:     level:     2
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      String
F@09:27:41  ***[237]:     path:      /struct2/s2-1
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:     name:      s2-2
F@09:27:41  ***[231]:     value:     2-2
F@09:27:41  ***[233]:     container: struct2
F@09:27:41  ***[234]:     level:     2
F@09:27:41  ***[235]:     sibling:   1
F@09:27:41  ***[236]:     type:      String
F@09:27:41  ***[237]:     path:      /struct2/s2-2
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  compoundValueEnd[137]: Set compoundValueP (0x100b20d0) for attribute at 0x10088f70
T@09:27:41  compoundValueEnd[143]: Set current container to NULL
T@09:27:41  updateAction[272]: Got an update action: 'APPEND'
T@09:27:41  xmlTreat[251]: Calling check for XML parsed tree (updateContextRequest)
T@09:27:41  ~UpdateContextResponse[58]: destroyed
F@09:27:41  ***[228]:     name:      toplevel
F@09:27:41  ***[233]:     container: toplevel
F@09:27:41  ***[234]:     level:     0
F@09:27:41  ***[235]:     sibling:   0
F@09:27:41  ***[236]:     type:      Object
F@09:27:41  ***[237]:     path:      /
F@09:27:41  ***[238]:     rootP:     toplevel
F@09:27:41  ***[251]:     2 children (struct1, struct2)
F@09:27:41  ***[228]:       name:      struct1
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   0
F@09:27:41  ***[236]:       type:      Object
F@09:27:41  ***[237]:       path:      /struct1
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[251]:       2 children (s1-1, s1-2)
F@09:27:41  ***[228]:         name:      s1-1
F@09:27:41  ***[231]:         value:     1-1
F@09:27:41  ***[233]:         container: struct1
F@09:27:41  ***[234]:         level:     2
F@09:27:41  ***[235]:         sibling:   0
F@09:27:41  ***[236]:         type:      String
F@09:27:41  ***[237]:         path:      /struct1/s1-1
F@09:27:41  ***[238]:         rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:         name:      s1-2
F@09:27:41  ***[231]:         value:     1-2
F@09:27:41  ***[233]:         container: struct1
F@09:27:41  ***[234]:         level:     2
F@09:27:41  ***[235]:         sibling:   1
F@09:27:41  ***[236]:         type:      String
F@09:27:41  ***[237]:         path:      /struct1/s1-2
F@09:27:41  ***[238]:         rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:       name:      struct2
F@09:27:41  ***[233]:       container: toplevel
F@09:27:41  ***[234]:       level:     1
F@09:27:41  ***[235]:       sibling:   1
F@09:27:41  ***[236]:       type:      Object
F@09:27:41  ***[237]:       path:      /struct2
F@09:27:41  ***[238]:       rootP:     toplevel
F@09:27:41  ***[251]:       2 children (s2-1, s2-2)
F@09:27:41  ***[228]:         name:      s2-1
F@09:27:41  ***[231]:         value:     2-1
F@09:27:41  ***[233]:         container: struct2
F@09:27:41  ***[234]:         level:     2
F@09:27:41  ***[235]:         sibling:   0
F@09:27:41  ***[236]:         type:      String
F@09:27:41  ***[237]:         path:      /struct2/s2-1
F@09:27:41  ***[238]:         rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[228]:         name:      s2-2
F@09:27:41  ***[231]:         value:     2-2
F@09:27:41  ***[233]:         container: struct2
F@09:27:41  ***[234]:         level:     2
F@09:27:41  ***[235]:         sibling:   1
F@09:27:41  ***[236]:         type:      String
F@09:27:41  ***[237]:         path:      /struct2/s2-2
F@09:27:41  ***[238]:         rootP:     toplevel
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
F@09:27:41  ***[257]: 
T@09:27:41  payloadParse[69]: result: 'OK'
T@09:27:41  payloadParse[70]: outFormat: XML
T@09:27:41  restService[138]: payloadParse returns 'OK'
T@09:27:41  restService[153]: Treating service POST /ngsi10/updateContext
T@09:27:41  reqSemTake[75]: mongoUpdateContext taking the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  reqSemTake[77]: mongoUpdateContext has the 'req' semaphore
T@09:27:41  processContextElement[1399]: query() in 'testharness.entities' collection: '{ _id.id: "ConferenceRoom", _id.type: "Room" }'
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'query in EntitiesCollection'
T@09:27:41  processContextElement[1433]: retrieved document: '{ _id: { id: "ConferenceRoom", type: "Room" }, attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: [ "1", "2", "3", "4", "5" ], modDate: 1399454861 } ], creDate: 1399454860, modDate: 1399454861 }'
T@09:27:41  ContextAttribute[86]: Creating a ContextAttribute 'temperature':'degree':'', setting its compound to NULL
T@09:27:41  addTriggeredSubscriptions[782]: JS function: function(){for (var i=0; i < this.entities.length; i++) {if (this.entities[i].isPattern == "true" && (this.entities[i].type == "Room" || this.entities[i].type == "" || !("type" in this.entities[i])) && "ConferenceRoom".match(this.entities[i].id)) {return true; }}return false; }
T@09:27:41  addTriggeredSubscriptions[797]: query() in 'testharness.csubs' collection: '{ $or: [ { entities.id: "ConferenceRoom", $or: [ { entities.type: "Room" }, { entities.type: { $exists: false } } ], entities.isPattern: "false", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 } }, { entities.isPattern: "true", conditions.type: "ONCHANGE", conditions.value: "temperature", expiration: { $gt: 1399454861 }, $where: function(){for (var i=0; i < this.entities.length; i++) {if (this.enti... } ] }'
T@09:27:41  mongoSemTake[90]: addTriggeredSubscriptions taking the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  mongoSemTake[92]: addTriggeredSubscriptions has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: addTriggeredSubscriptions gives the 'mongo' semaphore for 'query in SubscribeContextCollection'
T@09:27:41  processContextElement[1518]: update() in 'testharness.entities' collection: {{ _id.id: "ConferenceRoom", _id.type: "Room" }, { $set: { attrs: [ { name: "temperature", type: "degree", creDate: 1399454860, value: { struct1: { s1-1: "1-1", s1-2: "1-2" }, struct2: { s2-1: "2-1", s2-2: "2-2" } }, modDate: 1399454861 } ], modDate: 1399454861 }, $unset: { location: 1 } }}
T@09:27:41  mongoSemTake[90]: processContextElement taking the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  mongoSemTake[92]: processContextElement has the 'mongo' semaphore
T@09:27:41  mongoSemGive[118]: processContextElement gives the 'mongo' semaphore for 'update in EntitiesCollection'
T@09:27:41  reqSemGive[104]: mongoUpdateContext gives the 'req' semaphore for 'ngsi10 update request'
T@09:27:41  ~UpdateContextResponse[58]: destroyed
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'toplevel', path '/'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'struct1', path '/struct1'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1-1', path '/struct1/s1-1'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's1-2', path '/struct1/s1-2'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 'struct2', path '/struct2'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's2-1', path '/struct2/s2-1'
T@09:27:41  ~CompoundValueNode[106]: Destroying node 's2-2', path '/struct2/s2-2'
T@09:27:41  restReply[65]: Response 12: responding with 644 bytes, Status Code 200
T@09:27:41  restReply[66]: Response payload: '<updateContextResponse>
  <contextResponseList>
    <contextElementResponse>
      <contextElement>
        <entityId type="Room" isPattern="false">
          <id>ConferenceRoom</id>
        </entityId>
        <contextAttributeList>
          <contextAttribute>
            <name>temperature</name>
            <type>degree</type>
            <contextValue></contextValue>
          </contextAttribute>
        </contextAttributeList>
      </contextElement>
      <statusCode>
        <code>200</code>
        <reasonPhrase>OK</reasonPhrase>
      </statusCode>
    </contextElementResponse>
  </contextResponseList>
</updateContextResponse>
'
T@09:27:41  ~RegisterContextResponse[56]: destroyed
T@09:27:41  httpHeaderGet[94]: HTTP Header:   User-Agent: curl/7.26.0
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Host: localhost:9999
T@09:27:41  httpHeaderGet[94]: HTTP Header:   Accept: */*
T@09:27:41  restService[153]: Treating service GET /exit/harakiri
E@09:27:41  orionExit[548]: Received a 'DIE' request


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
    Value:      1
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND


1 ContextElementsContext Element 0:
  Entity Id:
    Id:         ConferenceRoom
    Type:       Room
    isPattern:  false
  No AttributeDomainName
1 ContextAttributes  Attribute 0:
    Name:       temperature
    Type:       degree
0 Attribute Metadatas
0 Domain Metadatas
UpdateActionType: APPEND
==27968== 
==27968== HEAP SUMMARY:
==27968==     in use at exit: 23,191 bytes in 148 blocks
==27968==   total heap usage: 8,793 allocs, 8,645 frees, 33,735,273 bytes allocated
==27968== 
==27968== LEAK SUMMARY:
==27968==    definitely lost: 0 bytes in 0 blocks
==27968==    indirectly lost: 0 bytes in 0 blocks
==27968==      possibly lost: 1,394 bytes in 16 blocks
==27968==    still reachable: 21,797 bytes in 132 blocks
==27968==         suppressed: 0 bytes in 0 blocks
==27968== Rerun with --leak-check=full to see details of leaked memory
==27968== 
==27968== For counts of detected and suppressed errors, rerun with: -v
==27968== Use --track-origins=yes to see where uninitialised values come from
==27968== ERROR SUMMARY: 311 errors from 34 contexts (suppressed: 7 from 7)
