# 1. Compound contextValue without vector
echo "1: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3>
                  <value31>vv2</value31>
                  <value32>vv3</value32>
                  <value33>vv4</value33>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 2. Compound contextValue with vector
echo "2: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3 type="vector">
                  <value>vv2</value>
                  <value>vv3</value>
                  <value>vv4</value>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 3. Compound contextValue with vector but one of the items have an incorrect tagname
echo "3: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3 type="vector">
                  <value>vv2</value>
                  <value>vv3</value>
                  <value3>vv4</value3>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 4. Compound contextValue with vector but two type-attributes
#INVALID_XML
echo "4: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3 type="vector" type="vector">
                  <value>vv2</value>
                  <value>vv3</value>
                  <value>vv4</value>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 5. Compound contextValue with vector but type-attribute with value != 'vector'
echo "5: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3 type="badType">
                  <value>vv2</value>
                  <value>vv3</value>
                  <value>vv4</value>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 6. Compound contextValue with vector but with unknown attribute
echo "6: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <level1>
              <value1>1</value1>
              <level2>
                <value2>2</value2>
                <value3>3</value3>
                <value4>4</value4>
                <level3 happy="yes">
                  <value>vv2</value>
                  <value>vv3</value>
                  <value>vv4</value>
                </level3>
              </level2>
              <level2again>
                <value5>5</value5>
                <value6>6</value6>
              </level2again>
            </level1>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 7. Compound contextValue with vector and contextValue as a vector
echo "7: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue type="vector">
            <item>1</item>
            <item>2</item>
            <item>3</item>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

# 8. Compound contextValue with struct that has two fields with the same name
echo "8: +++++++++++++++++++++++++++++++++"
url='/ngsi10/updateContext'
payload='<?xml version="1.0"?>
<updateContextRequest>
  <contextElementList>
    <contextElement>
      <entityId type="Room" isPattern="false">
        <id>ConferenceRoom</id>
      </entityId>
      <contextAttributeList>
        <contextAttribute>
          <name>temperature</name>
          <type>degree</type>
          <contextValue>
            <struct>
              <int>2</int>
              <long>21</long>
              <int>3</int>
            </struct>
          </contextValue>
        </contextAttribute>
      </contextAttributeList>
    </contextElement>
  </contextElementList>
  <updateAction>APPEND</updateAction>
</updateContextRequest>'
curlXml ${url} "${payload}"

