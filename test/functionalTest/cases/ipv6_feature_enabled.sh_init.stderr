+ source harnessFunctions.sh
+ dbInit CB
+ role=CB
+ '[' CB == CB ']'
+ echo 'db.dropDatabase()'
+ mongo testharness --quiet
+ brokerStart CB 0-255 IPV6
+ role=CB
+ traceLevels=0-255
+ ipVersion=IPV6
+ '[' CB == '' ']'
+ '[' 0-255 == '' ']'
+ '[' IPV6 == '' ']'
+ localBrokerStop CB
+ role=CB
+ '[' CB == CB ']'
+ port=9999
++ ps -fe
++ grep 9999
++ wc -l
++ grep contextBroker
+ running_broker=0
+ '[' 0 -ne 0 ']'
+ localBrokerStart CB 0-255 IPV6
+ role=CB
+ traceLevels=0-255
+ ipVersion=IPV6
+ IPv6Option=
+ '[' IPV6 == IPV6 ']'
+ IPv6Option=-ipv6
+ '[' CB == CB ']'
+ port=9999
+ CB_START_CMD='contextBroker -harakiri -port 9999 -pidpath /tmp/orion_9999.pid     -db testharness     -t 0-255 -ipv6'
+ '[' '' == '' ']'
+ contextBroker -harakiri -port 9999 -pidpath /tmp/orion_9999.pid -db testharness -t 0-255 -ipv6
+ sleep 1
++ ps -fe
++ grep 9999
++ wc -l
++ grep contextBroker
+ running_broker=1
+ '[' 1 -ne 1 ']'
+ accumulatorStart
+ ipVersion=
+ accumulatorStop
+ versionIp=
+ portNum=9997
+ '[' '' == IPV6 ']'
++ curl localhost:9997/pid -s -S
curl: (7) couldn't connect to host
+ kill
kill: uso: kill [-s id_señal | -n num_señal | -id_señal] pid | idtrabajo ... ó kill -l [id_señal]
+ sleep 1
++ ps -fe
++ grep 9997
++ wc -l
++ grep accumulator-server
+ running_app=0
+ '[' 0 -ne 0 ']'
+ IPv6Host=
+ port=9997
+ '[' '' == IPV6 ']'
+ echo accumulator running as PID 15693
+ port_not_ok=1
+ typeset -i time
+ accumulator-server.py 9997 /notify
+ time=0
+ '[' 1 -eq 0 ']'
+ '[' 0 -eq '' ']'
harnessFunctions.sh: línea 284: [: : se esperaba una expresión entera
+ sleep 1
 * Running on http://0.0.0.0:9997/
 * Restarting with reloader
+ time=0+1
+ nc -z localhost 9997
+ port_not_ok=0
+ '[' 0 -eq 0 ']'
+ accumulatorStart IPV6
+ ipVersion=IPV6
+ accumulatorStop IPV6
+ versionIp=IPV6
+ portNum=9997
+ '[' IPV6 == IPV6 ']'
++ curl :::9977/pid -s -S
curl: (7) couldn't connect to host
+ kill
kill: uso: kill [-s id_señal | -n num_señal | -id_señal] pid | idtrabajo ... ó kill -l [id_señal]
+ portNum=9977
+ sleep 1
++ ps -fe
++ grep 9977
++ wc -l
++ grep accumulator-server
+ running_app=0
+ '[' 0 -ne 0 ']'
+ IPv6Host=
+ port=9997
+ '[' IPV6 == IPV6 ']'
+ IPv6Host=::
+ port=9977
+ echo accumulator running as PID 15693
+ port_not_ok=1
+ accumulator-server.py 9977 /notify ::
+ time=0
+ '[' 1 -eq 0 ']'
+ '[' 0 -eq '' ']'
harnessFunctions.sh: línea 284: [: : se esperaba una expresión entera
+ sleep 1
 * Running on http://[::]:9977/
 * Restarting with reloader
+ time=0+1
+ nc -z localhost 9977
+ port_not_ok=0
+ '[' 0 -eq 0 ']'
::1 - - [07/Feb/2014 10:37:24] "POST /notify HTTP/1.1" 200 -
::1 - - [07/Feb/2014 10:37:24] "GET /dump HTTP/1.1" 200 -
127.0.0.1 - - [07/Feb/2014 10:37:24] "GET /dump HTTP/1.1" 200 -
127.0.0.1 - - [07/Feb/2014 10:37:24] "GET /pid HTTP/1.1" 200 -
::1 - - [07/Feb/2014 10:37:25] "GET /pid HTTP/1.1" 200 -
